/* * JAVA COMMUNITY PROCESS * * J S R  9 4 * * Test Compatibility Kit * */package org.jcp.jsr94.tck;import org.jcp.jsr94.tck.util.TestCaseUtil;import org.junit.jupiter.api.Test;import javax.rules.RuleRuntime;import javax.rules.RuleSession;/** * Test the javax.rules.RuleSession class. * <p> * <b>Performs the following tests:</b><br> * <ul> * <li>Basic API tests. {@link #testRuleSession} * <ul> * <li>Retrieve RuleExecutionSetMetadata * <li>Verify RuleSession type * <li>Release the session * </ul> * </ul> * * @version 1.0 * @see javax.rules.RuleSession * @since JSR-94 1.0 */class RuleSessionTest {    /**     * Test the compliance for javax.rules.RuleSession.     * This test will create a stateless and stateful rule session     * using the TestCaseUtil convenience methods. On each rule     * session the following tests will be performed.     * <p>     * <b>Description:</b><br>     * <ul>     * <li>Retrieve RuleExecutionSetMetadata     * <ul>     * <li>Fail: If any error occurs when retrieving the metadata.     * <li>Succeed: If a non null RuleExecutionSetMetadata is retrieved.     * </ul>     * <li>Verify RuleSession type     * <ul>     * <li>Fail: If the session type does not correspond with the     * created session.     * <li>Succeed: If the session type is equal to the type specified     * during creation of the session.     * </ul>     * <li>Release the session     * <ul>     * <li>Fail: If any error occurs during the release of the session.     * <li>Succeed: If the session can successfully be released.     * </ul>     * </ul>     *     * @see TestCaseUtil#getStatelessRuleSession     * @see TestCaseUtil#getStatefulRuleSession     */    @Test    void testRuleSession() {        try {            // Create a stateless session.            RuleSession ruleSession = TestCaseUtil.getStatelessRuleSession("ruleSessionTest", "src/test/resources/TckRes1.java");            assert ruleSession != null;            // Retrieve the metadata.            assert ruleSession.getRuleExecutionSetMetadata() != null;            // Check the rule session.            assert ruleSession.getType() == RuleRuntime.STATELESS_SESSION_TYPE;            // Let's release the session.            ruleSession.release();            // Create a stateful session.            ruleSession = TestCaseUtil.getStatefulRuleSession(                    "ruleSessionTest",                    "src/test/resources/TckRes1.java");            assert ruleSession != null;            // Retrieve the metadata.            assert ruleSession.getRuleExecutionSetMetadata() != null;            // Check the rule session.            assert ruleSession.getType() == RuleRuntime.STATEFUL_SESSION_TYPE;            // Let's release the session.            ruleSession.release();        } catch (Exception e) {            throw new IllegalStateException(e);        }    }}